"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var SelectBeauty=function(){function e(t){_classCallCheck(this,e),this.el=t.el,this.placeholder=void 0===t.placeholder?"Select Something":t.placeholder,this.length=void 0===t.length?3:t.length,this.max=void 0!==t.max&&t.max,this.initSelected=void 0===t.selected?[]:t.selected,this.selected={},this.tempData={},this.getTemporaryData(),this.getHtml(),this.hideSelect(),this.renderView(),this.buttonListener(),this.toggleListener(),this.selectListener(),this.filter()}return _createClass(e,[{key:"getTemporaryData",value:function(){var l=this;$.each($(this.el).children(),function(t,e){var n=$(e),a=n.attr("value"),i={text:n.text(),icon:n.attr("icon")};l.tempData[a]=i,0<l.initSelected.length&&l.inArray(l.initSelected,a)&&(l.selected[a]=l.tempData[a])})}},{key:"inArray",value:function(t,e){return!!(-1<t.findIndex(function(t){return t==e}))}},{key:"hideSelect",value:function(){$(this.el).hide(),$(this.el).attr("multiple",!0)}},{key:"renderView",value:function(){$(this.el).parent().append(this.htmlBeauty)}},{key:"htmlData",value:function(){var t="";for(name in this.tempData){var e=this.inArray(this.initSelected,name)?"active":"";t+='\n\t\t\t\t<li class="'.concat(e,'">\n\t\t\t\t\t<a href="#" data-value="').concat(name,'"><i class="iw ').concat(this.tempData[name].icon,'"></i> ').concat(this.tempData[name].text,"</a>\n\t\t\t\t</li>\n\t\t\t")}return t}},{key:"getHtml",value:function(){this.htmlBeauty='<div class="select-beauty" data-instance="'.concat(this.el,'">\n\t\t\t<button class="button-sb button-sb-block">').concat(this.placeholder,'</button>\n\t\t\t<ul class="hide">\n\t\t\t\t').concat(this.htmlData(),"\n\t\t\t</ul>\n\t\t</div>")}},{key:"toggleListener",value:function(){var e=this;$(document).click(function(t){$('[data-instance="'+e.el+'"] ul').addClass("hide")}),$('[data-instance="'+this.el+'"] ul').click(function(t){t.stopPropagation()})}},{key:"buttonListener",value:function(){$(document).find('[data-instance="'+this.el+'"]').on("click","button",function(t){t.preventDefault(),t.stopPropagation(),$(this).next("ul").toggleClass("hide")})}},{key:"selectListener",value:function(){var i=this;$(document).find('[data-instance="'+this.el+'"] ul').on("click","a",function(t){t.stopPropagation(),t.preventDefault();var e=$(this),n=e.attr("data-value"),a=e.parent();if(a.hasClass("active"))delete i.selected[n],a.removeClass("active");else{if(i.max&&i.countObject(i.selected)>=i.max)return!1;i.selected[n]=i.tempData[n],a.addClass("active")}i.filter()})}},{key:"countObject",value:function(t){return Object.keys(t).length}},{key:"filter",value:function(){var t=[],e=[],n=$('[data-instance="'+this.el+'"] button');for(name in this.selected)t.push(name),e.push(this.selected[name].text);$(this.el).val(t),e.length<1?n.text(this.placeholder):e.length>this.length?n.text("("+e.length+") Selected"):n.text(e.join(", "))}},{key:"reload",value:function(){this.selected={},this.tempData={},$(this.el).val([]),this.getTemporaryData(),$(document).find('[data-instance="'+this.el+'"] ul').html(""),$(document).find('[data-instance="'+this.el+'"] ul').html(this.htmlData())}}]),e}();