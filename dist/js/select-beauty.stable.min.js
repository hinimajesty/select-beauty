"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var SelectBeauty=function(){function a(b){_classCallCheck(this,a),this.el=b.el,this.placeholder="undefined"==typeof b.placeholder?"Select Something":b.placeholder,this.length="undefined"==typeof b.length?3:b.length,this.max="undefined"!=typeof b.max&&b.max,this.selected={},this.tempData={},this.getTemporaryData(),this.getHtml(),this.hideSelect(),this.renderView(),this.buttonListener(),this.toggleListener(),this.selectListener()}return _createClass(a,[{key:"getTemporaryData",value:function getTemporaryData(){var b=this;$.each($(this.el).children(),function(c,d){var e=$(d),f={text:e.text(),icon:e.attr("icon")};b.tempData[e.attr("value")]=f})}},{key:"hideSelect",value:function hideSelect(){$(this.el).hide(),$(this.el).attr("multiple",!0)}},{key:"renderView",value:function renderView(){$(this.el).parent().append(this.htmlBeauty)}},{key:"htmlData",value:function htmlData(){var b="";for(name in this.tempData)b+="\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#\" data-value=\""+name+"\"><i class=\"iw "+this.tempData[name].icon+"\"></i> "+this.tempData[name].text+"</a>\n\t\t\t\t</li>\n\t\t\t";return b}},{key:"getHtml",value:function getHtml(){this.htmlBeauty="<div class=\"select-beauty\" data-instance=\""+this.el+"\">\n\t\t\t<button class=\"button-sb button-sb-block\">"+this.placeholder+"</button>\n\t\t\t<ul class=\"hide\">\n\t\t\t\t"+this.htmlData()+"\n\t\t\t</ul>\n\t\t</div>"}},{key:"toggleListener",value:function toggleListener(){var b=this;$(document).click(function(){var d=$("[data-instance=\""+b.el+"\"] ul");d.addClass("hide")}),$("[data-instance=\""+this.el+"\"] ul").click(function(c){c.stopPropagation()})}},{key:"buttonListener",value:function buttonListener(){$(document).find("[data-instance=\""+this.el+"\"]").on("click","button",function(b){b.preventDefault(),b.stopPropagation(),$(this).next("ul").toggleClass("hide")})}},{key:"selectListener",value:function selectListener(){var b=this;$(document).find("[data-instance=\""+this.el+"\"] ul").on("click","a",function(c){c.stopPropagation(),c.preventDefault();var d=$(this),e=d.attr("data-value"),f=d.parent();if(f.hasClass("active"))delete b.selected[e],f.removeClass("active");else{if(b.max&&b.countObject(b.selected)>=b.max)return!1;b.selected[e]=b.tempData[e],f.addClass("active")}b.filter()})}},{key:"countObject",value:function countObject(b){return Object.keys(b).length}},{key:"filter",value:function filter(){var b=[],c=[],d=$("[data-instance=\""+this.el+"\"] button");for(name in this.selected)b.push(name),c.push(this.selected[name].text);$(this.el).val(b),1>c.length?d.text(this.placeholder):c.length>this.length?d.text("("+c.length+") Selected"):d.text(c.join(", "))}},{key:"reload",value:function reload(){this.selected={},this.tempData={},$(this.el).val([]),this.getTemporaryData(),$(document).find("[data-instance=\""+this.el+"\"] ul").html(""),$(document).find("[data-instance=\""+this.el+"\"] ul").html(this.htmlData())}}]),a}();